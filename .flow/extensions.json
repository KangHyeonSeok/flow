{
  "$schema": "./schemas/extensions-schema.json",
  "version": "1.0.0",
  "description": "Flow 확장 상태 정의 파일. 확장을 추가/제거/활성화/비활성화할 수 있습니다.",
  
  "extensions": {
    "STRUCTURE_REVIEW": {
      "id": "STRUCTURE_REVIEW",
      "name": "구조 리뷰",
      "description": "변경된 코드의 구조를 분석하고 리팩토링을 제안합니다.",
      "enabled": false,
      "priority": 10,
      
      "trigger": {
        "after": "VALIDATING",
        "condition": "validation_passed",
        "description": "검증 통과 후 구조 리뷰 실행"
      },
      
      "actions": [
        {
          "type": "analyze",
          "target": "changed_files",
          "checks": [
            "duplicate_code",
            "long_functions",
            "deep_nesting",
            "unused_imports",
            "naming_conventions"
          ]
        },
        {
          "type": "suggest",
          "format": "markdown",
          "output": "리팩토링 제안 목록"
        },
        {
          "type": "prompt_user",
          "message": "리팩토링 제안을 적용하시겠습니까? (Y/N/Skip)"
        }
      ],
      
      "transitions": {
        "suggestions_accepted": "EXECUTING",
        "suggestions_rejected": "COMPLETED",
        "no_suggestions": "COMPLETED",
        "error": "BLOCKED"
      },
      
      "config": {
        "max_suggestions": 5,
        "severity_threshold": "warning",
        "auto_fix": false
      }
    },
    
    "DESIGN_REVIEW": {
      "id": "DESIGN_REVIEW",
      "name": "설계 리뷰",
      "description": "새 기능 추가 시 설계/아키텍처를 검토합니다.",
      "enabled": false,
      "priority": 5,
      
      "trigger": {
        "after": "PLANNING",
        "condition": "new_feature",
        "description": "새 기능 플랜 작성 후 설계 리뷰"
      },
      
      "actions": [
        {
          "type": "analyze",
          "target": "plan_file",
          "checks": [
            "architecture_fit",
            "dependency_impact",
            "scalability",
            "maintainability"
          ]
        }
      ],
      
      "transitions": {
        "approved": "REVIEWING",
        "needs_revision": "PLANNING",
        "error": "BLOCKED"
      }
    },
    
    "TEST_SUGGESTION": {
      "id": "TEST_SUGGESTION",
      "name": "테스트 제안",
      "description": "변경된 코드에 대한 테스트 케이스를 제안합니다.",
      "enabled": false,
      "priority": 20,
      
      "trigger": {
        "after": "STRUCTURE_REVIEW",
        "condition": "always",
        "description": "구조 리뷰 후 테스트 제안"
      },
      
      "actions": [
        {
          "type": "analyze",
          "target": "changed_functions",
          "checks": [
            "edge_cases",
            "error_handling",
            "boundary_conditions"
          ]
        },
        {
          "type": "generate",
          "format": "test_cases",
          "output": "테스트 케이스 목록"
        }
      ],
      
      "transitions": {
        "tests_accepted": "EXECUTING",
        "tests_rejected": "COMPLETED",
        "no_tests_needed": "COMPLETED"
      }
    },
    
    "SECURITY_REVIEW": {
      "id": "SECURITY_REVIEW",
      "name": "보안 검토",
      "description": "보안 관련 코드 변경 시 취약점을 검토합니다.",
      "enabled": false,
      "priority": 1,
      
      "trigger": {
        "after": "VALIDATING",
        "condition": "security_related_files",
        "description": "인증/권한/입력 처리 파일 변경 시"
      },
      
      "actions": [
        {
          "type": "analyze",
          "target": "changed_files",
          "checks": [
            "input_validation",
            "authentication",
            "authorization",
            "sensitive_data",
            "injection_risks"
          ]
        }
      ],
      
      "transitions": {
        "secure": "COMPLETED",
        "vulnerabilities_found": "BLOCKED",
        "needs_review": "BLOCKED"
      }
    }
  },
  
  "settings": {
    "max_extensions_per_run": 3,
    "extension_timeout_seconds": 300,
    "allow_parallel": false,
    "log_extension_activity": true
  }
}
